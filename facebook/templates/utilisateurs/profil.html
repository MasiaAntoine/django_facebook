{% extends "facebook/base.html" %} {% load static %} {% block title %} {% if is_own_profile %}Mon Profil{% else %}Profil
de {{ user_profil.username }}{% endif %} {% endblock %} {% block content %}

<!-- Header du profil -->
{% include "utilisateurs/profil/header.html" %} {% if user_profil.est_privee and not is_own_profile %}
<!-- Profil privé -->
<div class="text-center mt-5">
  <div class="card shadow-sm mx-auto" style="max-width: 500px;">
    <div class="card-header bg-warning text-dark">
      <h4 class="mb-0"><i class="fas fa-lock me-2"></i>Profil privé</h4>
    </div>
    <div class="card-body">
      <p class="text-muted mb-4">Ce profil est privé mais voici quelques statistiques :</p>

      <!-- Statistiques publiques -->
      <div class="row text-center">
        <div class="col-6">
          <div class="border-end">
            <h3 class="text-primary mb-1">{{ user_stats.total_posts }}</h3>
            <small class="text-muted">Publication{{ user_stats.total_posts|pluralize }}</small>
          </div>
        </div>
        <div class="col-6">
          <h3 class="text-success mb-1">{{ user_stats.member_since|timesince }}</h3>
          <small class="text-muted">Membre depuis</small>
        </div>
      </div>

      <hr class="my-3" />

      <div class="row text-center">
        <div class="col-12">
          <p class="mb-2">
            <i class="fas fa-calendar-alt me-2 text-muted"></i>
            <strong>Inscription :</strong> {{ user_stats.member_since|date:"d M Y" }}
          </p>
        </div>
      </div>

      <div class="mt-4">
        <small class="text-muted">
          <i class="fas fa-info-circle me-1"></i>
          Les détails complets ne sont visibles que par le propriétaire du compte.
        </small>
      </div>
    </div>
  </div>
</div>
{% else %}
<!-- Sous-menu avec onglets -->
<ul class="nav nav-tabs my-4" id="profileTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button
      class="nav-link active"
      id="publications-tab"
      data-bs-toggle="tab"
      data-bs-target="#publications"
      type="button"
      role="tab"
      aria-controls="publications"
      aria-selected="true">
      <i class="fas fa-newspaper me-2"></i>Publications
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button
      class="nav-link"
      id="about-tab"
      data-bs-toggle="tab"
      data-bs-target="#about"
      type="button"
      role="tab"
      aria-controls="about"
      aria-selected="false">
      <i class="fas fa-info-circle me-2"></i>À propos
    </button>
  </li>
</ul>

<!-- Contenu des onglets -->
<div class="tab-content" id="profileTabsContent">
  <!-- Onglet Publications -->
  <div class="tab-pane fade show active" id="publications" role="tabpanel" aria-labelledby="publications-tab">
    {% include "utilisateurs/profil/publications.html" %}
  </div>

  <!-- Onglet À propos -->
  <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">
    {% include "utilisateurs/profil/a_propos.html" %}
  </div>
</div>
{% endif %} {% endblock %}
